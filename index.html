<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>You're Invited!</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;800&family=Quicksand:wght@400;600;700&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --pink: #ff6b9d;
      --purple: #c44dff;
      --blue: #4dc9ff;
      --yellow: #ffe14d;
      --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    }

    body {
      font-family: 'Quicksand', sans-serif;
      background: var(--bg-gradient);
      min-height: 100vh;
      overflow: hidden;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    canvas#stars {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .screen {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 10;
      padding: 20px;
    }

    .screen.active {
      display: flex;
      animation: fadeIn 0.8s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      25% { transform: translateY(-12px) rotate(3deg); }
      75% { transform: translateY(6px) rotate(-3deg); }
    }

    @keyframes floatSlow {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-18px) rotate(5deg); }
    }

    @keyframes shimmer {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }

    @keyframes bounceIn {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px) rotate(-3deg); }
      75% { transform: translateX(8px) rotate(3deg); }
    }

    @keyframes drift {
      0% { transform: translateY(0) translateX(0) rotate(0deg); }
      25% { transform: translateY(-15px) translateX(10px) rotate(5deg); }
      50% { transform: translateY(-5px) translateX(-8px) rotate(-3deg); }
      75% { transform: translateY(-20px) translateX(5px) rotate(4deg); }
      100% { transform: translateY(0) translateX(0) rotate(0deg); }
    }

    h1 {
      font-family: 'Baloo 2', cursive;
      font-size: clamp(2rem, 6vw, 3.5rem);
      margin-bottom: 10px;
      background: linear-gradient(90deg, var(--pink), var(--purple), var(--blue), var(--yellow));
      background-size: 300% 100%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: shimmer 4s linear infinite;
    }

    h2 {
      font-family: 'Baloo 2', cursive;
      font-size: clamp(1.4rem, 4vw, 2.2rem);
      margin-bottom: 8px;
      color: var(--yellow);
    }

    p {
      font-size: clamp(0.95rem, 2.5vw, 1.15rem);
      color: rgba(255,255,255,0.85);
      max-width: 500px;
      line-height: 1.6;
    }

    /* ============ LANDING PAGE SLEEPOVER DECORATIONS ============ */
    .sleepover-deco {
      position: fixed;
      z-index: 2;
      pointer-events: none;
      filter: drop-shadow(0 8px 24px rgba(0,0,0,0.3));
      opacity: 0.0;
      transition: opacity 1.5s ease;
    }

    .sleepover-deco.visible { opacity: 1; }

    .deco-pjs {
      top: 1%; left: 1%;
      animation: drift 8s ease-in-out infinite;
    }

    .deco-bottle {
      top: 0%; right: 2%;
      animation: floatSlow 7s ease-in-out infinite;
      animation-delay: -1s;
    }

    .deco-flowers {
      top: 40%; left: -1%;
      animation: drift 9s ease-in-out infinite;
      animation-delay: -2s;
    }

    .deco-glass {
      top: 35%; right: 0%;
      animation: floatSlow 6s ease-in-out infinite;
      animation-delay: -3s;
    }

    .deco-mirror {
      bottom: 4%; left: 1%;
      animation: drift 7s ease-in-out infinite;
      animation-delay: -1.5s;
    }

    .deco-camera {
      bottom: 2%; right: 1%;
      animation: floatSlow 8s ease-in-out infinite;
      animation-delay: -4s;
    }

    .deco-bracelet {
      bottom: 1%; left: 36%;
      animation: drift 6s ease-in-out infinite;
      animation-delay: -0.5s;
    }

    .deco-eyemask {
      bottom: 2%; left: 28%;
      animation: floatSlow 10s ease-in-out infinite;
      animation-delay: -2.5s;
      z-index: 1;
    }

    /* ============ SCREEN 1: NAME ENTRY ============ */
    #screen-name .moon {
      width: 90px; height: 90px;
      background: radial-gradient(circle at 35% 35%, #fff8dc, #ffd700);
      border-radius: 50%;
      box-shadow: 0 0 60px rgba(255,215,0,0.4), 0 0 120px rgba(255,215,0,0.15);
      margin-bottom: 24px;
      animation: float 4s ease-in-out infinite;
    }

    .input-group {
      margin: 25px 0;
      position: relative;
    }

    .input-group input {
      background: rgba(255,255,255,0.08);
      border: 2px solid rgba(255,255,255,0.15);
      border-radius: 50px;
      padding: 16px 30px;
      font-size: 1.1rem;
      color: white;
      font-family: 'Quicksand', sans-serif;
      width: 320px;
      max-width: 85vw;
      text-align: center;
      outline: none;
      transition: all 0.3s ease;
    }

    .input-group input::placeholder { color: rgba(255,255,255,0.4); }

    .input-group input:focus {
      border-color: var(--pink);
      background: rgba(255,255,255,0.12);
      box-shadow: 0 0 25px rgba(255,107,157,0.2);
    }

    .btn {
      background: linear-gradient(135deg, var(--pink), var(--purple));
      border: none;
      border-radius: 50px;
      padding: 14px 40px;
      font-size: 1.1rem;
      font-weight: 700;
      color: white;
      font-family: 'Quicksand', sans-serif;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 25px rgba(196,77,255,0.35);
      letter-spacing: 0.5px;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 35px rgba(196,77,255,0.5);
    }

    .btn:active { transform: translateY(0); }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* ============ SCREEN 2: PILLOW SELECTION ============ */
    .pillow-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 24px 0;
      max-width: 520px;
    }

    .pillow-option {
      background: rgba(255,255,255,0.06);
      border: 3px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 18px 10px 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .pillow-option:hover {
      transform: translateY(-6px) scale(1.03);
      border-color: rgba(255,255,255,0.3);
      background: rgba(255,255,255,0.1);
    }

    .pillow-option.selected {
      border-color: var(--yellow);
      background: rgba(255,225,77,0.12);
      box-shadow: 0 0 30px rgba(255,225,77,0.2);
    }

    .pillow-option .pillow-svg-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 8px;
      animation: float 3s ease-in-out infinite;
    }

    .pillow-option:nth-child(2) .pillow-svg-wrap { animation-delay: -0.5s; }
    .pillow-option:nth-child(3) .pillow-svg-wrap { animation-delay: -1s; }
    .pillow-option:nth-child(4) .pillow-svg-wrap { animation-delay: -1.5s; }
    .pillow-option:nth-child(5) .pillow-svg-wrap { animation-delay: -2s; }
    .pillow-option:nth-child(6) .pillow-svg-wrap { animation-delay: -2.5s; }

    .pillow-option .pillow-name {
      font-size: 0.8rem;
      font-weight: 600;
      color: rgba(255,255,255,0.7);
      display: block;
    }

    .pillow-option .check {
      position: absolute;
      top: -8px; right: -8px;
      width: 28px; height: 28px;
      background: var(--yellow);
      border-radius: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      color: #1a1a2e;
      font-weight: 800;
      animation: bounceIn 0.3s ease;
    }

    .pillow-option.selected .check { display: flex; }

    /* ============ SCREEN 3: PILLOW FIGHT ============ */
    #screen-fight {
      user-select: none;
      cursor: pointer;
      overflow: hidden;
    }

    

    .smash-counter {
      font-family: 'Baloo 2', cursive;
      font-size: 2rem;
      color: var(--blue);
      text-shadow: 0 2px 12px rgba(77,201,255,0.4);
      letter-spacing: 2px;
      text-align: center;
      margin: 0 0 4px 0;
    }

    .combo-display {
      font-family: 'Baloo 2', cursive;
      font-size: 1.1rem;
      color: var(--yellow);
      opacity: 0;
      transition: opacity 0.2s, transform 0.2s;
      transform: scale(0.8);
      text-align: center;
      margin: 0 0 4px 0;
    }

    .combo-display.active {
      opacity: 1;
      transform: scale(1);
    }

    .winner-banner {
      display: none;
      font-family: 'Baloo 2', cursive;
      font-size: clamp(1.8rem, 6vw, 3rem);
      color: var(--yellow);
      text-shadow: 0 0 30px rgba(255,225,77,0.7), 0 2px 12px rgba(0,0,0,0.4);
      animation: bounceIn 0.6s ease;
      margin-top: 12px;
      text-align: center;
      position: relative;
      z-index: 20;
      background: linear-gradient(135deg, rgba(255,225,77,0.15), rgba(255,140,200,0.15));
      padding: 12px 28px;
      border-radius: 16px;
      border: 2px solid rgba(255,225,77,0.3);
    }

    .winner-banner.show { display: block; }

    .fight-scene {
      position: relative;
      width: 96vw;
      max-width: 750px;
      height: 420px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      margin: 0 auto;
    }

    .fighter {
      position: absolute;
      bottom: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 2;
      transition: transform 0.08s ease;
    }

    .fighter.left { left: 5%; }
    .fighter.right { right: 5%; }

    .fighter-name {
      font-weight: 700;
      font-size: 0.9rem;
      margin-top: 2px;
      color: var(--yellow);
      text-shadow: 0 2px 8px rgba(0,0,0,0.5);
    }

    .fighter-avatar {
      position: relative;
      cursor: pointer;
    }

    .fighter.left .fighter-avatar {
      transform-origin: 70% 60%;
    }

    .fighter.right .fighter-avatar {
      transform-origin: 30% 60%;
    }

    .fighter.swing-left .fighter-avatar {
      animation: swingLeft 0.22s ease;
    }

    .fighter.swing-right .fighter-avatar {
      animation: swingRight 0.22s ease;
    }

    @keyframes swingLeft {
      0% { transform: translateX(0) rotate(0deg); }
      35% { transform: translateX(40px) rotate(12deg); }
      100% { transform: translateX(0) rotate(0deg); }
    }

    @keyframes swingRight {
      0% { transform: translateX(0) rotate(0deg); }
      35% { transform: translateX(-40px) rotate(-12deg); }
      100% { transform: translateX(0) rotate(0deg); }
    }

    /* Impact burst in center */
    .impact-zone {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      pointer-events: none;
    }

    .impact-burst {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 0; height: 0;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,107,157,0.6) 40%, transparent 70%);
      opacity: 0;
      pointer-events: none;
      z-index: 15;
    }

    .impact-burst.fire {
      animation: impactBurst 0.4s ease forwards;
    }

    @keyframes impactBurst {
      0% { width: 0; height: 0; opacity: 1; }
      50% { width: 120px; height: 120px; opacity: 0.8; }
      100% { width: 180px; height: 180px; opacity: 0; }
    }

    .impact-burst.fire.big {
      animation: impactBurstBig 0.5s ease forwards;
    }

    @keyframes impactBurstBig {
      0% { width: 0; height: 0; opacity: 1; }
      40% { width: 200px; height: 200px; opacity: 0.9; }
      100% { width: 280px; height: 280px; opacity: 0; }
    }

    .fight-instruction {
      font-size: 0.85rem;
      opacity: 0.5;
      margin-top: 6px;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 0.8; }
    }

    .progress-bar-container {
      width: 320px;
      max-width: 82vw;
      height: 14px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
      margin-top: 8px;
      position: relative;
    }

    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--pink), var(--purple), var(--blue));
      background-size: 200% 100%;
      border-radius: 10px;
      width: 0%;
      transition: width 0.3s ease;
      animation: shimmer 2s linear infinite;
    }

    .hit-effect {
      position: fixed;
      pointer-events: none;
      font-size: 2rem;
      animation: hitPop 0.6s ease forwards;
      z-index: 100;
    }

    @keyframes hitPop {
      0% { transform: scale(0.5) translateY(0); opacity: 1; }
      100% { transform: scale(1.5) translateY(-60px); opacity: 0; }
    }

    .flash-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: white;
      opacity: 0;
      pointer-events: none;
      z-index: 90;
      transition: opacity 0.05s;
    }

    .flash-overlay.flash {
      opacity: 0.15;
      transition: opacity 0s;
    }

    /* ============ FEATHER CANVAS ============ */
    #feather-canvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 50;
      pointer-events: none;
    }

    /* ============ INVITE CARD ============ */
    #screen-invite { z-index: 60; }

    .invite-card {
      background: rgba(255,255,255,0.07);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 28px;
      padding: 40px 36px;
      max-width: 480px;
      width: 90vw;
      position: relative;
      overflow: hidden;
    }

    .invite-card::before {
      content: '';
      position: absolute;
      top: -2px; left: -2px; right: -2px; bottom: -2px;
      background: linear-gradient(135deg, var(--pink), var(--purple), var(--blue), var(--yellow));
      border-radius: 30px;
      z-index: -1;
      opacity: 0.3;
    }

    .invite-card .invite-header {
      font-family: 'Baloo 2', cursive;
      font-size: clamp(1.6rem, 5vw, 2.4rem);
      margin-bottom: 6px;
      background: linear-gradient(135deg, var(--yellow), var(--pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .invite-card .invite-sub {
      font-size: 1rem;
      color: rgba(255,255,255,0.6);
      margin-bottom: 24px;
    }

    .detail-row {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px 0;
      border-bottom: 1px solid rgba(255,255,255,0.07);
    }

    .detail-row:last-of-type { border-bottom: none; }

    .detail-icon {
      font-size: 1.5rem;
      width: 44px; height: 44px;
      background: rgba(255,255,255,0.08);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .detail-info { text-align: left; }

    .detail-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: rgba(255,255,255,0.4);
      font-weight: 700;
    }

    .detail-value {
      font-size: 1.05rem;
      font-weight: 600;
      color: white;
    }

    /* ============ RSVP ============ */
    .rsvp-section {
      margin-top: 28px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .rsvp-checkbox-wrapper {
      display: flex;
      align-items: center;
      gap: 14px;
      cursor: pointer;
      padding: 14px 18px;
      border-radius: 16px;
      background: rgba(255,255,255,0.05);
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    .rsvp-checkbox-wrapper:hover { background: rgba(255,255,255,0.08); }

    .rsvp-checkbox-wrapper.checked {
      border-color: rgba(77,201,255,0.4);
      background: rgba(77,201,255,0.08);
    }

    .rsvp-checkbox {
      width: 28px; height: 28px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.3s ease;
      font-size: 16px;
    }

    .rsvp-checkbox-wrapper.checked .rsvp-checkbox {
      background: var(--blue);
      border-color: var(--blue);
    }

    .rsvp-label {
      font-weight: 600;
      font-size: 1rem;
      text-align: left;
      line-height: 1.4;
    }

    .rsvp-label small {
      display: block;
      font-weight: 400;
      font-size: 0.8rem;
      color: rgba(255,255,255,0.5);
      margin-top: 2px;
    }

    .rsvp-confirm {
      margin-top: 16px;
      display: none;
      animation: bounceIn 0.5s ease;
    }

    .rsvp-confirm.show { display: block; }

    .rsvp-confirm p {
      font-size: 1rem;
      color: var(--blue);
      font-weight: 700;
    }

    .rsvp-submit-btn {
      margin-top: 14px;
      background: linear-gradient(135deg, var(--blue), var(--purple));
      border: none;
      border-radius: 50px;
      padding: 12px 32px;
      font-size: 1rem;
      font-weight: 700;
      color: white;
      font-family: 'Quicksand', sans-serif;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(77,201,255,0.3);
      display: none;
    }

    .rsvp-submit-btn.show {
      display: inline-block;
      animation: bounceIn 0.5s ease;
    }

    .rsvp-submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 30px rgba(77,201,255,0.4);
    }

    .rsvp-success {
      display: none;
      margin-top: 14px;
      padding: 14px;
      background: rgba(77,201,255,0.1);
      border-radius: 14px;
      animation: bounceIn 0.5s ease;
    }

    .rsvp-success.show { display: block; }

    .rsvp-success p {
      color: var(--yellow);
      font-weight: 700;
      font-size: 1.1rem;
    }

    /* ============ GUEST LIST ============ */
    .guest-list-section {
      margin-top: 24px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .guest-list-header {
      font-family: 'Baloo 2', cursive;
      font-size: 1.2rem;
      color: var(--pink);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .guest-list-header .guest-count {
      background: rgba(255,140,200,0.15);
      padding: 2px 10px;
      border-radius: 20px;
      font-size: 0.85rem;
      color: var(--pink);
    }

    .guest-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .guest-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      font-size: 0.9rem;
      color: rgba(255,255,255,0.85);
      animation: bounceIn 0.4s ease;
    }

    .guest-chip .guest-avatar {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--pink), var(--purple));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.65rem;
      font-weight: 700;
      color: white;
      flex-shrink: 0;
    }

    .guest-list-empty {
      font-size: 0.85rem;
      color: rgba(255,255,255,0.4);
      font-style: italic;
    }

    .guest-list-loading {
      font-size: 0.85rem;
      color: rgba(255,255,255,0.4);
    }

    /* Z-bubbles */
    .zzz {
      position: fixed;
      font-size: 1.5rem;
      opacity: 0;
      z-index: 1;
      animation: zzFloat 4s ease-in-out infinite;
    }

    @keyframes zzFloat {
      0% { opacity: 0; transform: translateY(0) scale(0.5); }
      30% { opacity: 0.6; }
      100% { opacity: 0; transform: translateY(-120px) translateX(30px) scale(1.2); }
    }

    /* Responsive */
    @media (max-width: 600px) {
      .pillow-grid { grid-template-columns: repeat(2, 1fr); gap: 14px; }
      .fight-area { height: 300px; }
      .vs-text { font-size: 1.6rem; margin: 0 10px; }
      .invite-card { padding: 28px 22px; }
      .sleepover-deco svg { transform: scale(0.55); transform-origin: top left; }
      .sleepover-deco.deco-pjs { top: 0%; left: -1%; }
      .sleepover-deco.deco-bottle { top: 0%; right: -1%; }
      .sleepover-deco.deco-flowers { top: 38%; left: -2%; }
      .sleepover-deco.deco-glass { top: 34%; right: -2%; }
      .sleepover-deco.deco-mirror { bottom: 4%; left: -1%; }
      .sleepover-deco.deco-camera { bottom: 0%; right: -1%; }
      .sleepover-deco.deco-bracelet { bottom: 0%; left: 22%; }
      .sleepover-deco.deco-eyemask { bottom: 1%; left: 18%; }
      .fighter-avatar svg { width: 160px; height: 210px; }
      .fight-scene { height: 330px; }
      .fighter.left { left: 0%; }
      .fighter.right { right: 0%; }
    }
  </style>
</head>
<body>

<canvas id="stars"></canvas>

<!-- Floating Z's -->
<div class="zzz" style="left: 10%; top: 60%; animation-delay: 0s;">&#x1f4a4;</div>
<div class="zzz" style="left: 80%; top: 40%; animation-delay: 1.5s;">&#x1f4a4;</div>
<div class="zzz" style="left: 50%; top: 70%; animation-delay: 3s;">&#x1f4a4;</div>

<!-- ============ SLEEPOVER DECORATIONS (large, high-detail) ============ -->

<!-- 1. Pink Striped Pajamas (top-left) - LARGE -->
<div class="sleepover-deco deco-pjs" id="deco-pjs">
  <svg width="180" height="215" viewBox="0 0 110 130">
    <defs>
      <pattern id="pjStripes" patternUnits="userSpaceOnUse" width="5" height="5" patternTransform="rotate(0)">
        <rect width="5" height="5" fill="#f8a4c8"/>
        <rect width="2.5" height="5" fill="#f5dce8"/>
      </pattern>
      <pattern id="pjStripesD" patternUnits="userSpaceOnUse" width="5" height="5" patternTransform="rotate(0)">
        <rect width="5" height="5" fill="#e890b8"/>
        <rect width="2.5" height="5" fill="#f0d4e2"/>
      </pattern>
    </defs>
    <!-- PJ Shirt body -->
    <rect x="22" y="8" width="66" height="58" rx="10" fill="url(#pjStripes)"/>
    <!-- Collar lapels -->
    <path d="M42 8 L55 24 L68 8" fill="#f5dce8" stroke="#e0a0c0" stroke-width="0.8"/>
    <path d="M42 8 L48 16" stroke="#d890b0" stroke-width="0.5" fill="none"/>
    <path d="M68 8 L62 16" stroke="#d890b0" stroke-width="0.5" fill="none"/>
    <!-- Left Sleeve -->
    <path d="M22 12 L2 30 L2 48 L22 40" fill="url(#pjStripes)" stroke="#e0a0c0" stroke-width="0.6"/>
    <!-- Right Sleeve -->
    <path d="M88 12 L108 30 L108 48 L88 40" fill="url(#pjStripes)" stroke="#e0a0c0" stroke-width="0.6"/>
    <!-- Sleeve cuffs -->
    <path d="M2 44 L22 38" stroke="#e8b0c8" stroke-width="2" stroke-linecap="round"/>
    <path d="M108 44 L88 38" stroke="#e8b0c8" stroke-width="2" stroke-linecap="round"/>
    <!-- Buttons -->
    <circle cx="55" cy="26" r="2.2" fill="#f5e0ea" stroke="#d088a8" stroke-width="0.6"/>
    <circle cx="55" cy="36" r="2.2" fill="#f5e0ea" stroke="#d088a8" stroke-width="0.6"/>
    <circle cx="55" cy="46" r="2.2" fill="#f5e0ea" stroke="#d088a8" stroke-width="0.6"/>
    <circle cx="55" cy="56" r="2.2" fill="#f5e0ea" stroke="#d088a8" stroke-width="0.6"/>
    <!-- Button holes -->
    <line x1="54" y1="26" x2="56" y2="26" stroke="#c880a0" stroke-width="0.4"/>
    <line x1="54" y1="36" x2="56" y2="36" stroke="#c880a0" stroke-width="0.4"/>
    <line x1="54" y1="46" x2="56" y2="46" stroke="#c880a0" stroke-width="0.4"/>
    <!-- Pocket -->
    <rect x="30" y="28" width="14" height="16" rx="3" fill="none" stroke="#e0a0c0" stroke-width="0.8"/>
    <path d="M30 28 Q37 32 44 28" stroke="#e0a0c0" stroke-width="0.5" fill="none"/>
    <!-- PJ Shorts -->
    <path d="M24 70 L24 112 Q38 118 55 112 L55 70 Z" fill="url(#pjStripesD)"/>
    <path d="M55 70 L55 112 Q72 118 86 112 L86 70 Z" fill="url(#pjStripesD)"/>
    <!-- Shorts hem -->
    <path d="M24 110 Q38 118 55 112" stroke="#d890b0" stroke-width="0.8" fill="none"/>
    <path d="M55 112 Q72 118 86 110" stroke="#d890b0" stroke-width="0.8" fill="none"/>
    <!-- Waistband -->
    <rect x="22" y="64" width="66" height="8" rx="4" fill="#f0a0c0"/>
    <line x1="28" y1="68" x2="82" y2="68" stroke="#e890b0" stroke-width="0.5" stroke-dasharray="2,2"/>
    <!-- Shirt outline -->
    <rect x="22" y="8" width="66" height="58" rx="10" fill="none" stroke="#d898b0" stroke-width="0.8" opacity="0.5"/>
    <!-- Ribbon bow -->
    <path d="M48 68 Q44 62 40 66 Q44 70 48 68" fill="#f0c8d8"/>
    <path d="M62 68 Q66 62 70 66 Q66 70 62 68" fill="#f0c8d8"/>
    <circle cx="55" cy="68" r="2.5" fill="#e890b8"/>
  </svg>
</div>

<!-- 2. Prosecco / Champagne Bottle (top-right) - LARGE -->
<div class="sleepover-deco deco-bottle" id="deco-bottle">
  <svg width="90" height="230" viewBox="0 0 55 140">
    <!-- Foil wrap -->
    <path d="M19 2 L19 14 Q19 16 21 16 L34 16 Q36 16 36 14 L36 2 Q36 0 34 0 L21 0 Q19 0 19 2" fill="#e8a0b0"/>
    <rect x="21" y="3" width="13" height="3" rx="1" fill="#d08898" opacity="0.5"/>
    <rect x="21" y="8" width="13" height="2" rx="1" fill="#d08898" opacity="0.3"/>
    <!-- Foil collar -->
    <rect x="17" y="14" width="21" height="5" rx="2" fill="#d4877a"/>
    <rect x="18" y="15" width="19" height="1" fill="#e0a090" opacity="0.4"/>
    <!-- Neck -->
    <rect x="22" y="19" width="11" height="28" rx="4" fill="#6a8e50"/>
    <rect x="24" y="19" width="3" height="28" rx="1" fill="#7aa060" opacity="0.3"/>
    <!-- Neck label/medallion -->
    <rect x="19" y="30" width="17" height="12" rx="2" fill="#f0d8a0"/>
    <rect x="19" y="30" width="17" height="12" rx="2" fill="none" stroke="#c8a060" stroke-width="0.5"/>
    <circle cx="27.5" cy="36" r="3.5" fill="none" stroke="#c8a060" stroke-width="0.6"/>
    <circle cx="27.5" cy="36" r="1.5" fill="#c8a060" opacity="0.5"/>
    <!-- Body -->
    <path d="M22 47 Q12 57 12 68 L12 124 Q12 133 21 133 L34 133 Q43 133 43 124 L43 68 Q43 57 33 47 Z" fill="#4a7035"/>
    <!-- Body left highlight -->
    <path d="M22 47 Q14 57 14 68 L14 124 Q14 131 20 132" fill="#5a8845" opacity="0.45"/>
    <!-- Body right shadow -->
    <path d="M33 47 Q41 57 41 68 L41 124 Q41 131 35 132" fill="#3a6028" opacity="0.25"/>
    <!-- Main label -->
    <rect x="14" y="78" width="27" height="36" rx="3" fill="#faf0e6"/>
    <rect x="14" y="78" width="27" height="36" rx="3" fill="none" stroke="#d8c0a0" stroke-width="0.5"/>
    <!-- Label text lines -->
    <rect x="17" y="82" width="21" height="3" rx="1" fill="#e8a0b0" opacity="0.7"/>
    <rect x="19" y="88" width="17" height="2" rx="0.5" fill="#c8a0a0" opacity="0.4"/>
    <rect x="18" y="93" width="19" height="2" rx="0.5" fill="#c8a0a0" opacity="0.35"/>
    <rect x="20" y="98" width="15" height="2" rx="0.5" fill="#c8a0a0" opacity="0.3"/>
    <rect x="19" y="103" width="17" height="1.5" rx="0.5" fill="#e8a0b0" opacity="0.25"/>
    <rect x="17" y="108" width="21" height="2" rx="0.5" fill="#d8b0a0" opacity="0.3"/>
    <!-- Bottom punt shadow -->
    <ellipse cx="27.5" cy="133" rx="15.5" ry="3" fill="#3a5e28" opacity="0.35"/>
  </svg>
</div>

<!-- 3. Pink Cosmos Flowers (mid-left) - LARGE -->
<div class="sleepover-deco deco-flowers" id="deco-flowers">
  <svg width="160" height="230" viewBox="0 0 95 135">
    <!-- Stems -->
    <path d="M48 130 Q45 100 40 75 Q36 55 30 38" stroke="#5a7a4a" stroke-width="2.2" fill="none" stroke-linecap="round"/>
    <path d="M48 130 Q50 105 53 82 Q55 62 58 48" stroke="#5a7a4a" stroke-width="2" fill="none" stroke-linecap="round"/>
    <path d="M48 130 Q42 108 36 92 Q28 74 20 62" stroke="#5a7a4a" stroke-width="1.8" fill="none" stroke-linecap="round"/>
    <path d="M48 130 Q54 105 62 78 Q66 64 72 52" stroke="#5a7a4a" stroke-width="1.8" fill="none" stroke-linecap="round"/>
    <path d="M48 130 Q46 112 44 98" stroke="#5a7a4a" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <!-- Leaves -->
    <path d="M40 88 Q30 80 24 85 Q30 92 40 88" fill="#6a9058" stroke="#5a8048" stroke-width="0.4"/>
    <path d="M36 88 Q32 84 28 86" stroke="#7aa068" stroke-width="0.5" fill="none"/>
    <path d="M54 75 Q63 67 68 73 Q61 79 54 75" fill="#6a9058" stroke="#5a8048" stroke-width="0.4"/>
    <path d="M35 104 Q24 100 22 106 Q28 110 35 104" fill="#5a8048" stroke="#4a7038" stroke-width="0.3"/>
    <path d="M52 95 Q58 88 62 93 Q56 98 52 95" fill="#6a9058" stroke="#5a8048" stroke-width="0.3"/>
    <!-- Flower 1 (top-left) - large open bloom -->
    <g transform="translate(30,32)">
      <ellipse cx="0" cy="-12" rx="6" ry="12" fill="#e87098" opacity="0.9"/>
      <ellipse cx="0" cy="-12" rx="6" ry="12" fill="#e87098" opacity="0.9" transform="rotate(72)"/>
      <ellipse cx="0" cy="-12" rx="6" ry="12" fill="#d86088" opacity="0.85" transform="rotate(144)"/>
      <ellipse cx="0" cy="-12" rx="6" ry="12" fill="#e87098" opacity="0.9" transform="rotate(216)"/>
      <ellipse cx="0" cy="-12" rx="6" ry="12" fill="#d86088" opacity="0.85" transform="rotate(288)"/>
      <!-- Petal veins -->
      <line x1="0" y1="-4" x2="0" y2="-20" stroke="#c85878" stroke-width="0.3" opacity="0.4"/>
      <line x1="0" y1="-4" x2="11" y2="-8" stroke="#c85878" stroke-width="0.3" opacity="0.4" transform="rotate(72)"/>
      <circle cx="0" cy="0" r="5" fill="#f0c870"/>
      <circle cx="-1.5" cy="-1.5" r="1" fill="#d8a040"/>
      <circle cx="1.5" cy="1" r="1" fill="#d8a040"/>
      <circle cx="0.5" cy="-0.5" r="0.7" fill="#c89030"/>
      <circle cx="-0.5" cy="1.5" r="0.8" fill="#d8a040"/>
    </g>
    <!-- Flower 2 (top-right) -->
    <g transform="translate(60,45)">
      <ellipse cx="0" cy="-11" rx="5.5" ry="11" fill="#f0a0b8" opacity="0.85"/>
      <ellipse cx="0" cy="-11" rx="5.5" ry="11" fill="#f0a0b8" opacity="0.85" transform="rotate(72)"/>
      <ellipse cx="0" cy="-11" rx="5.5" ry="11" fill="#e890a8" opacity="0.85" transform="rotate(144)"/>
      <ellipse cx="0" cy="-11" rx="5.5" ry="11" fill="#f0a0b8" opacity="0.85" transform="rotate(216)"/>
      <ellipse cx="0" cy="-11" rx="5.5" ry="11" fill="#e890a8" opacity="0.85" transform="rotate(288)"/>
      <circle cx="0" cy="0" r="4.5" fill="#f0c870"/>
      <circle cx="-1" cy="-1" r="0.8" fill="#d8a040"/>
      <circle cx="1" cy="0.5" r="0.8" fill="#d8a040"/>
    </g>
    <!-- Flower 3 (left) - deeper pink -->
    <g transform="translate(20,58)">
      <ellipse cx="0" cy="-10" rx="5" ry="10" fill="#d06080" opacity="0.9"/>
      <ellipse cx="0" cy="-10" rx="5" ry="10" fill="#d06080" opacity="0.9" transform="rotate(72)"/>
      <ellipse cx="0" cy="-10" rx="5" ry="10" fill="#c05070" opacity="0.85" transform="rotate(144)"/>
      <ellipse cx="0" cy="-10" rx="5" ry="10" fill="#d06080" opacity="0.9" transform="rotate(216)"/>
      <ellipse cx="0" cy="-10" rx="5" ry="10" fill="#c05070" opacity="0.85" transform="rotate(288)"/>
      <circle cx="0" cy="0" r="4" fill="#e8b860"/>
      <circle cx="0" cy="0" r="1.5" fill="#d0a040"/>
    </g>
    <!-- Flower 4 (right) -->
    <g transform="translate(72,50)">
      <ellipse cx="0" cy="-8" rx="4.5" ry="8" fill="#e88098" opacity="0.8"/>
      <ellipse cx="0" cy="-8" rx="4.5" ry="8" fill="#e88098" opacity="0.8" transform="rotate(72)"/>
      <ellipse cx="0" cy="-8" rx="4.5" ry="8" fill="#d87088" opacity="0.8" transform="rotate(144)"/>
      <ellipse cx="0" cy="-8" rx="4.5" ry="8" fill="#e88098" opacity="0.8" transform="rotate(216)"/>
      <ellipse cx="0" cy="-8" rx="4.5" ry="8" fill="#d87088" opacity="0.8" transform="rotate(288)"/>
      <circle cx="0" cy="0" r="3" fill="#f0c870"/>
    </g>
    <!-- Bud -->
    <g transform="translate(44,92)">
      <ellipse cx="-2" cy="0" rx="3" ry="5" fill="#e08090" opacity="0.7" transform="rotate(-10)"/>
      <ellipse cx="2" cy="0" rx="3" ry="5" fill="#d07080" opacity="0.6" transform="rotate(10)"/>
      <path d="M0 5 Q-2 3 0 -3 Q2 3 0 5" fill="#5a7a4a" opacity="0.5"/>
    </g>
  </svg>
</div>

<!-- 4. Champagne Coupe Glass (mid-right) - LARGE -->
<div class="sleepover-deco deco-glass" id="deco-glass">
  <svg width="140" height="190" viewBox="0 0 80 110">
    <!-- Glass bowl -->
    <path d="M10 14 Q10 50 27 56 L27 56 Q29 57 29 59 L29 59 L51 59 Q51 57 53 56 Q70 50 70 14 Z" fill="#f8d8d8" opacity="0.4"/>
    <path d="M10 14 Q10 50 27 56 L27 56 Q29 57 29 59 L29 59 L51 59 Q51 57 53 56 Q70 50 70 14 Z" fill="none" stroke="#e0a0b0" stroke-width="1"/>
    <!-- Liquid -->
    <path d="M14 20 Q14 48 28 55 L52 55 Q66 48 66 20 Z" fill="#f4b8c4" opacity="0.4"/>
    <!-- Liquid surface shine -->
    <ellipse cx="40" cy="20" rx="24" ry="3" fill="#f8d0d8" opacity="0.3"/>
    <!-- Bubbles - more of them -->
    <circle cx="28" cy="34" r="2.2" fill="white" opacity="0.5"/>
    <circle cx="44" cy="26" r="1.8" fill="white" opacity="0.45"/>
    <circle cx="36" cy="42" r="2" fill="white" opacity="0.5"/>
    <circle cx="52" cy="36" r="1.4" fill="white" opacity="0.4"/>
    <circle cx="24" cy="24" r="1.2" fill="white" opacity="0.35"/>
    <circle cx="50" cy="30" r="2.2" fill="white" opacity="0.45"/>
    <circle cx="38" cy="20" r="1.5" fill="white" opacity="0.4"/>
    <circle cx="30" cy="48" r="1" fill="white" opacity="0.3"/>
    <circle cx="46" cy="44" r="1.3" fill="white" opacity="0.35"/>
    <circle cx="34" cy="30" r="1.8" fill="white" opacity="0.4"/>
    <circle cx="56" cy="24" r="1" fill="white" opacity="0.3"/>
    <!-- Glass rim -->
    <ellipse cx="40" cy="14" rx="30" ry="5" fill="#f8e0e4" opacity="0.25"/>
    <ellipse cx="40" cy="14" rx="30" ry="5" fill="none" stroke="#d8a0b0" stroke-width="1"/>
    <!-- Stem -->
    <rect x="37" y="59" width="6" height="30" rx="2" fill="#f0d0d8" opacity="0.6"/>
    <rect x="37" y="59" width="6" height="30" rx="2" fill="none" stroke="#d0a0b0" stroke-width="0.6"/>
    <!-- Stem decorative node -->
    <ellipse cx="40" cy="74" rx="4" ry="2.5" fill="#f0d0d8" opacity="0.5"/>
    <!-- Base -->
    <ellipse cx="40" cy="92" rx="20" ry="5.5" fill="#f0d0d8" opacity="0.55"/>
    <ellipse cx="40" cy="92" rx="20" ry="5.5" fill="none" stroke="#d0a0b0" stroke-width="0.8"/>
    <ellipse cx="40" cy="91" rx="16" ry="3.5" fill="white" opacity="0.08"/>
    <!-- Shine on glass -->
    <path d="M20 17 Q18 30 22 44" stroke="white" stroke-width="1.5" fill="none" opacity="0.35" stroke-linecap="round"/>
    <path d="M22 18 Q21 22 22 26" stroke="white" stroke-width="2" fill="none" opacity="0.2" stroke-linecap="round"/>
  </svg>
</div>

<!-- 5. Vanity Mirror on Stand (bottom-left) - LARGE -->
<div class="sleepover-deco deco-mirror" id="deco-mirror">
  <svg width="150" height="195" viewBox="0 0 85 110">
    <!-- Stand base -->
    <ellipse cx="42" cy="106" rx="28" ry="5" fill="#f0d8c0" opacity="0.65"/>
    <ellipse cx="42" cy="106" rx="28" ry="5" fill="none" stroke="#d0b090" stroke-width="0.8"/>
    <ellipse cx="42" cy="105" rx="24" ry="3.5" fill="#f8e8d8" opacity="0.2"/>
    <!-- Stand stem -->
    <rect x="38" y="72" width="8" height="35" rx="2.5" fill="#e8c8a8"/>
    <rect x="38" y="72" width="8" height="35" rx="2.5" fill="none" stroke="#c8a880" stroke-width="0.6"/>
    <rect x="40" y="74" width="2" height="30" rx="1" fill="#f0d8c0" opacity="0.3"/>
    <!-- Mirror outer frame -->
    <circle cx="42" cy="40" r="34" fill="#e8d0b8"/>
    <circle cx="42" cy="40" r="34" fill="none" stroke="#c8a888" stroke-width="1.5"/>
    <!-- Mirror inner frame -->
    <circle cx="42" cy="40" r="31" fill="#f0dcc8"/>
    <circle cx="42" cy="40" r="31" fill="none" stroke="#d8b898" stroke-width="1"/>
    <!-- Mirror glass -->
    <circle cx="42" cy="40" r="27" fill="#faf6f2"/>
    <!-- Mirror reflection -->
    <ellipse cx="34" cy="30" rx="12" ry="16" fill="white" opacity="0.2" transform="rotate(-15 34 30)"/>
    <path d="M26 22 Q32 16 40 19" stroke="white" stroke-width="1.5" fill="none" opacity="0.35" stroke-linecap="round"/>
    <path d="M28 26 Q32 22 36 24" stroke="white" stroke-width="1" fill="none" opacity="0.2" stroke-linecap="round"/>
    <!-- Decorative scallops on frame -->
    <circle cx="42" cy="7" r="2.5" fill="#e0b898"/>
    <circle cx="24" cy="12" r="2" fill="#e0b898"/>
    <circle cx="60" cy="12" r="2" fill="#e0b898"/>
    <circle cx="13" cy="25" r="2" fill="#e0b898"/>
    <circle cx="71" cy="25" r="2" fill="#e0b898"/>
    <circle cx="9" cy="40" r="2" fill="#e0b898"/>
    <circle cx="75" cy="40" r="2" fill="#e0b898"/>
    <circle cx="13" cy="55" r="2" fill="#e0b898"/>
    <circle cx="71" cy="55" r="2" fill="#e0b898"/>
    <circle cx="24" cy="68" r="2" fill="#e0b898"/>
    <circle cx="60" cy="68" r="2" fill="#e0b898"/>
    <circle cx="42" cy="73" r="2.5" fill="#e0b898"/>
  </svg>
</div>

<!-- 6. Pink Camera with Hearts (bottom-right) - LARGE -->
<div class="sleepover-deco deco-camera" id="deco-camera">
  <svg width="170" height="135" viewBox="0 0 100 80">
    <!-- Camera body -->
    <rect x="8" y="18" width="84" height="54" rx="12" fill="#f4a0b8"/>
    <rect x="10" y="20" width="80" height="50" rx="10" fill="#f8b0c4"/>
    <rect x="8" y="18" width="84" height="54" rx="12" fill="none" stroke="#d880a0" stroke-width="1"/>
    <!-- Texture lines -->
    <line x1="12" y1="60" x2="88" y2="60" stroke="#e898b0" stroke-width="0.5" opacity="0.4"/>
    <!-- Top bump / viewfinder -->
    <rect x="34" y="7" width="32" height="15" rx="6" fill="#f098b0"/>
    <rect x="34" y="7" width="32" height="15" rx="6" fill="none" stroke="#d880a0" stroke-width="0.8"/>
    <rect x="42" y="10" width="16" height="6" rx="2" fill="#e890a8" opacity="0.5"/>
    <!-- Lens outer ring -->
    <circle cx="50" cy="44" r="20" fill="#4a4a4a"/>
    <circle cx="50" cy="44" r="20" fill="none" stroke="#d880a0" stroke-width="2"/>
    <!-- Lens rings -->
    <circle cx="50" cy="44" r="17" fill="#3a3a3a"/>
    <circle cx="50" cy="44" r="14" fill="#2a2a2a"/>
    <circle cx="50" cy="44" r="10" fill="#505060"/>
    <circle cx="50" cy="44" r="7" fill="#1a1a2e"/>
    <circle cx="50" cy="44" r="4" fill="#303040"/>
    <!-- Lens shine -->
    <ellipse cx="44" cy="38" rx="4" ry="5" fill="white" opacity="0.2" transform="rotate(-20 44 38)"/>
    <circle cx="55" cy="50" r="2" fill="white" opacity="0.12"/>
    <!-- Shutter button -->
    <circle cx="80" cy="12" r="6" fill="#d87098"/>
    <circle cx="80" cy="12" r="4" fill="#e890b0"/>
    <circle cx="80" cy="12" r="2" fill="#f0a0c0" opacity="0.6"/>
    <!-- Flash -->
    <rect x="14" y="22" width="12" height="8" rx="2.5" fill="#f8d8e0"/>
    <rect x="16" y="24" width="8" height="4" rx="1.5" fill="white" opacity="0.25"/>
    <!-- Heart decorations -->
    <g transform="translate(18,52) scale(0.55)">
      <path d="M0,-6 C-8,-18 -22,-4 0,10 C22,-4 8,-18 0,-6 Z" fill="#d86088" opacity="0.8"/>
    </g>
    <g transform="translate(82,32) scale(0.45)">
      <path d="M0,-6 C-8,-18 -22,-4 0,10 C22,-4 8,-18 0,-6 Z" fill="#d86088" opacity="0.7"/>
    </g>
    <g transform="translate(78,58) scale(0.4)">
      <path d="M0,-6 C-8,-18 -22,-4 0,10 C22,-4 8,-18 0,-6 Z" fill="#e8a0b8" opacity="0.6"/>
    </g>
    <g transform="translate(26,28) scale(0.3)">
      <path d="M0,-6 C-8,-18 -22,-4 0,10 C22,-4 8,-18 0,-6 Z" fill="#e8a0b8" opacity="0.5"/>
    </g>
    <!-- Strap holes -->
    <circle cx="12" cy="34" r="2.5" fill="#d07898" opacity="0.8"/>
    <circle cx="88" cy="34" r="2.5" fill="#d07898" opacity="0.8"/>
  </svg>
</div>

<!-- 7. Butterfly Charm Bracelet (bottom-center) - LARGE -->
<div class="sleepover-deco deco-bracelet" id="deco-bracelet">
  <svg width="170" height="100" viewBox="0 0 100 60">
    <!-- Chain -->
    <path d="M5 32 Q18 14 38 28 Q52 38 65 22 Q78 12 95 30" stroke="#f0a8c0" stroke-width="2" fill="none" stroke-linecap="round"/>
    <!-- Small chain links -->
    <circle cx="10" cy="28" r="1.2" fill="none" stroke="#e8a0b8" stroke-width="0.6"/>
    <circle cx="22" cy="19" r="1.2" fill="none" stroke="#e8a0b8" stroke-width="0.6"/>
    <circle cx="48" cy="34" r="1.2" fill="none" stroke="#e8a0b8" stroke-width="0.6"/>
    <circle cx="80" cy="17" r="1.2" fill="none" stroke="#e8a0b8" stroke-width="0.6"/>
    <!-- Beads -->
    <circle cx="15" cy="22" r="5" fill="#f8c0d0"/>
    <circle cx="15" cy="22" r="5" fill="none" stroke="#e098b0" stroke-width="0.6"/>
    <ellipse cx="15" cy="20" rx="2" ry="1.5" fill="white" opacity="0.2"/>
    <circle cx="28" cy="18" r="5.5" fill="#e0c8f0"/>
    <circle cx="28" cy="18" r="5.5" fill="none" stroke="#c098d0" stroke-width="0.6"/>
    <ellipse cx="28" cy="16" rx="2" ry="1.5" fill="white" opacity="0.2"/>
    <circle cx="55" cy="34" r="5" fill="#f8c0d0"/>
    <circle cx="55" cy="34" r="5" fill="none" stroke="#e098b0" stroke-width="0.6"/>
    <circle cx="78" cy="18" r="5.5" fill="#c8e0f0"/>
    <circle cx="78" cy="18" r="5.5" fill="none" stroke="#98b8d0" stroke-width="0.6"/>
    <ellipse cx="78" cy="16" rx="2" ry="1.5" fill="white" opacity="0.15"/>
    <circle cx="90" cy="28" r="4.5" fill="#f8d0e0"/>
    <circle cx="90" cy="28" r="4.5" fill="none" stroke="#e0a8c0" stroke-width="0.5"/>
    <!-- Heart charm -->
    <g transform="translate(42,26) scale(0.65)">
      <path d="M0,-6 C-8,-18 -22,-4 0,10 C22,-4 8,-18 0,-6 Z" fill="#e06890"/>
      <path d="M0,-4 C-4,-12 -12,-4 0,4" fill="#e878a0" opacity="0.4"/>
    </g>
    <!-- Butterfly charm -->
    <g transform="translate(67,28)">
      <ellipse cx="-6" cy="-4" rx="6" ry="8" fill="#e880a8" opacity="0.85" transform="rotate(-20 -6 -4)"/>
      <ellipse cx="6" cy="-4" rx="6" ry="8" fill="#e880a8" opacity="0.85" transform="rotate(20 6 -4)"/>
      <ellipse cx="-5" cy="4" rx="5" ry="6" fill="#d07090" opacity="0.75" transform="rotate(-10 -5 4)"/>
      <ellipse cx="5" cy="4" rx="5" ry="6" fill="#d07090" opacity="0.75" transform="rotate(10 5 4)"/>
      <circle cx="-4" cy="-2" r="1.5" fill="#c06080" opacity="0.3"/>
      <circle cx="4" cy="-2" r="1.5" fill="#c06080" opacity="0.3"/>
      <rect x="-0.6" y="-7" width="1.2" height="14" rx="0.6" fill="#984868"/>
      <path d="M0 -7 Q-5 -12 -4 -14" stroke="#984868" stroke-width="0.8" fill="none" stroke-linecap="round"/>
      <path d="M0 -7 Q5 -12 4 -14" stroke="#984868" stroke-width="0.8" fill="none" stroke-linecap="round"/>
    </g>
    <!-- Star charm -->
    <g transform="translate(8,32) scale(0.4)">
      <polygon points="0,-14 4,-4.5 14,-4.5 6.5,2 9,12 0,6.5 -9,12 -6.5,2 -14,-4.5 -4,-4.5" fill="#f0c060"/>
      <polygon points="0,-8 2,-3 8,-3 3.5,1 5,7 0,4 -5,7 -3.5,1 -8,-3 -2,-3" fill="#f8d880" opacity="0.5"/>
    </g>
  </svg>
</div>

<!-- 8. Satin Sleep Eye Mask (floating center-ish) - NEW -->
<div class="sleepover-deco deco-eyemask" id="deco-eyemask">
  <svg width="180" height="95" viewBox="0 0 140 72">
    <defs>
      <linearGradient id="eyemaskGrad" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#d898c8"/>
        <stop offset="30%" style="stop-color:#c480b8"/>
        <stop offset="70%" style="stop-color:#b068a8"/>
        <stop offset="100%" style="stop-color:#9858a0"/>
      </linearGradient>
      <linearGradient id="eyemaskShine" x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" style="stop-color:white;stop-opacity:0.2"/>
        <stop offset="100%" style="stop-color:white;stop-opacity:0"/>
      </linearGradient>
    </defs>
    <!-- Elastic strap -->
    <path d="M6 34 Q-8 20 4 8" stroke="#c090b0" stroke-width="2.5" fill="none" stroke-linecap="round" opacity="0.7"/>
    <path d="M134 34 Q148 20 136 8" stroke="#c090b0" stroke-width="2.5" fill="none" stroke-linecap="round" opacity="0.7"/>
    <!-- Main mask shape - left eye -->
    <ellipse cx="42" cy="36" rx="36" ry="26" fill="url(#eyemaskGrad)" opacity="0.92"/>
    <!-- Main mask shape - right eye -->
    <ellipse cx="98" cy="36" rx="36" ry="26" fill="url(#eyemaskGrad)" opacity="0.92"/>
    <!-- Bridge piece -->
    <rect x="62" y="26" width="16" height="20" rx="8" fill="url(#eyemaskGrad)" opacity="0.9"/>
    <!-- Satin shine on left -->
    <ellipse cx="32" cy="28" rx="18" ry="12" fill="url(#eyemaskShine)" opacity="0.6"/>
    <!-- Satin shine on right -->
    <ellipse cx="88" cy="28" rx="18" ry="12" fill="url(#eyemaskShine)" opacity="0.6"/>
    <!-- Contour stitching -->
    <ellipse cx="42" cy="36" rx="33" ry="23" fill="none" stroke="#a870a0" stroke-width="0.6" stroke-dasharray="3,2" opacity="0.4"/>
    <ellipse cx="98" cy="36" rx="33" ry="23" fill="none" stroke="#a870a0" stroke-width="0.6" stroke-dasharray="3,2" opacity="0.4"/>
    <!-- Inner eye contours (darker area) -->
    <ellipse cx="42" cy="38" rx="18" ry="12" fill="#9858a0" opacity="0.2"/>
    <ellipse cx="98" cy="38" rx="18" ry="12" fill="#9858a0" opacity="0.2"/>
    <!-- Subtle lace/scallop edge at top -->
    <path d="M10 14 Q16 10 22 14 Q28 10 34 14 Q40 10 46 14 Q52 10 58 14" stroke="#d0a0c8" stroke-width="0.8" fill="none" opacity="0.5"/>
    <path d="M82 14 Q88 10 94 14 Q100 10 106 14 Q112 10 118 14 Q124 10 130 14" stroke="#d0a0c8" stroke-width="0.8" fill="none" opacity="0.5"/>
    <!-- Small decorative bow at bridge top -->
    <path d="M64 24 Q60 18 56 22 Q60 26 64 24" fill="#d8a8c8" opacity="0.7"/>
    <path d="M76 24 Q80 18 84 22 Q80 26 76 24" fill="#d8a8c8" opacity="0.7"/>
    <circle cx="70" cy="23" r="2" fill="#b878a8"/>
    <!-- Sparkle accent -->
    <g transform="translate(25,22) scale(0.25)">
      <polygon points="0,-10 2.5,-2.5 10,0 2.5,2.5 0,10 -2.5,2.5 -10,0 -2.5,-2.5" fill="white" opacity="0.5"/>
    </g>
    <g transform="translate(115,30) scale(0.2)">
      <polygon points="0,-10 2.5,-2.5 10,0 2.5,2.5 0,10 -2.5,2.5 -10,0 -2.5,-2.5" fill="white" opacity="0.4"/>
    </g>
  </svg>
</div>


<!-- ============ SCREEN 1: NAME ENTRY ============ -->
<div id="screen-name" class="screen active">
  <div class="moon"></div>
  <h1>Sleepover Party!</h1>
  <p>You've been chosen for the most epic sleepover ever. But first... tell us who you are!</p>
  <div class="input-group">
    <input type="text" id="player-name" placeholder="Enter your name..." maxlength="20" autocomplete="off" />
  </div>
  <button class="btn" id="btn-start" disabled>Let's Go!</button>
</div>

<!-- ============ SCREEN 2: PILLOW SELECTION ============ -->
<div id="screen-pillow" class="screen">
  <h2>Hey <span id="greeting-name"></span>!</h2>
  <h1>Pick Your Pillow</h1>
  <p>Choose your weapon for the ultimate pillow fight!</p>
  <div class="pillow-grid" id="pillow-grid"></div>
  <button class="btn" id="btn-fight" disabled>Start Pillow Fight!</button>
</div>

<!-- ============ SCREEN 3: PILLOW FIGHT ============ -->
<div id="screen-fight" class="screen">
  <p class="smash-counter"><span id="smash-count">0</span> / <span id="smash-goal">10</span></p>
  <div class="combo-display" id="combo-display">COMBO x1</div>
  <div class="fight-scene" id="fight-scene">
    <!-- Player (left) -->
    <div class="fighter left" id="fighter-left">
      <div class="fighter-avatar" id="player-avatar"></div>
      <span class="fighter-name" id="fighter-player-name">You</span>
    </div>
    <!-- Impact zone center -->
    <div class="impact-zone" id="impact-zone">
      <div class="impact-burst" id="impact-burst"></div>
    </div>
    <!-- Opponent (right) -->
    <div class="fighter right" id="fighter-right">
      <div class="fighter-avatar" id="opponent-avatar"></div>
      <span class="fighter-name">Party Crew</span>
    </div>
  </div>
  <div class="progress-bar-container">
    <div class="progress-bar-fill" id="fight-progress"></div>
  </div>
  <p class="fight-instruction" id="fight-instruction">Tap or click anywhere to swing!</p>
  <div class="winner-banner" id="winner-banner"></div>
  <div class="flash-overlay" id="flash-overlay"></div>
</div>

<!-- ============ FEATHER CANVAS + INVITE ============ -->
<canvas id="feather-canvas"></canvas>

<div id="screen-invite" class="screen">
  <div class="invite-card">
    <div class="invite-header">Hey <span id="invite-name"></span>!</div>
    <div class="invite-sub">You're invited to The Ultimate Sleepover Party</div>

    <div class="detail-row">
      <div class="detail-icon">&#x1f4c5;</div>
      <div class="detail-info">
        <div class="detail-label">Date</div>
        <div class="detail-value">Saturday, March 21, 2026</div>
      </div>
    </div>

    <div class="detail-row">
      <div class="detail-icon">&#x1f556;</div>
      <div class="detail-info">
        <div class="detail-label">Time</div>
        <div class="detail-value">6:00 PM - Next Morning</div>
      </div>
    </div>

    <div class="detail-row">
      <div class="detail-icon">&#x1f4cd;</div>
      <div class="detail-info">
        <div class="detail-label">Where</div>
        <div class="detail-value">Flat 62, Rivulet Apartments, N4 2GS</div>
      </div>
    </div>

    <div class="detail-row">
      <div class="detail-icon">&#x1f392;</div>
      <div class="detail-info">
        <div class="detail-label">Bring</div>
        <div class="detail-value">PJs, Snacks & Good Vibes</div>
      </div>
    </div>

    <div class="rsvp-section">
      <div class="rsvp-checkbox-wrapper" id="rsvp-wrapper">
        <div class="rsvp-checkbox" id="rsvp-check"></div>
        <div class="rsvp-label">
          Count me in! I'll be there!
          <small>Check to RSVP for the sleepover</small>
        </div>
      </div>
      <button class="rsvp-submit-btn" id="rsvp-submit">Confirm RSVP</button>
      <div class="rsvp-confirm" id="rsvp-confirm">
        <p id="rsvp-msg"></p>
      </div>
      <div class="rsvp-success" id="rsvp-success">
        <p>See you at the party! &#x1f389;&#x1f6cf;&#xfe0f;&#x2728;</p>
      </div>
    </div>

    <div class="guest-list-section">
      <div class="guest-list-header">
        &#x1f46f; Party Squad <span class="guest-count" id="guest-count">0 going</span>
      </div>
      <div class="guest-list" id="guest-list">
        <div class="guest-list-loading">Loading guest list...</div>
      </div>
    </div>
  </div>
</div>

<script>
  // ===================== RSVP GOOGLE SHEETS CONFIG =====================
  // To enable persistent RSVP tracking via Google Sheets:
  // 1. Create a Google Sheet
  // 2. Go to Extensions > Apps Script
  // 3. Paste the code from rsvp-apps-script.gs
  // 4. Deploy as web app (Execute as: Me, Who has access: Anyone)
  // 5. Paste the deployed URL below:
  const RSVP_SCRIPT_URL = ''; // e.g. 'https://script.google.com/macros/s/YOUR_ID/exec'

  // ===================== SVG HELPERS =====================

  function makePillowSVG(color, highlight, shadow, size = 80) {
    return `<svg width="${size}" height="${size * 0.7}" viewBox="0 0 120 84">
      <defs>
        <linearGradient id="pg_${color.replace('#','')}" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:${highlight}"/>
          <stop offset="50%" style="stop-color:${color}"/>
          <stop offset="100%" style="stop-color:${shadow}"/>
        </linearGradient>
      </defs>
      <rect x="6" y="8" width="108" height="68" rx="22" ry="22" fill="url(#pg_${color.replace('#','')})" />
      <rect x="6" y="8" width="108" height="68" rx="22" ry="22" fill="none" stroke="${shadow}" stroke-width="1.5" opacity="0.4"/>
      <!-- Pillow puff corners -->
      <ellipse cx="18" cy="20" rx="12" ry="10" fill="${highlight}" opacity="0.25"/>
      <ellipse cx="102" cy="20" rx="12" ry="10" fill="${highlight}" opacity="0.25"/>
      <ellipse cx="18" cy="64" rx="12" ry="10" fill="${shadow}" opacity="0.15"/>
      <ellipse cx="102" cy="64" rx="12" ry="10" fill="${shadow}" opacity="0.15"/>
      <!-- Stitch lines -->
      <line x1="30" y1="12" x2="30" y2="72" stroke="${shadow}" stroke-width="1" opacity="0.2" stroke-dasharray="4,4"/>
      <line x1="90" y1="12" x2="90" y2="72" stroke="${shadow}" stroke-width="1" opacity="0.2" stroke-dasharray="4,4"/>
      <!-- Shine -->
      <ellipse cx="50" cy="24" rx="25" ry="8" fill="white" opacity="0.12"/>
    </svg>`;
  }

  const pillowData = [
    { id: 'pink',     name: 'Blush Pink',    color: '#ff8fab', highlight: '#ffb3c6', shadow: '#d9536b' },
    { id: 'lavender', name: 'Lavender',      color: '#c3aed6', highlight: '#e0d0f0', shadow: '#9575cd' },
    { id: 'mint',     name: 'Mint Green',    color: '#80cbc4', highlight: '#b2dfdb', shadow: '#4db6ac' },
    { id: 'sky',      name: 'Sky Blue',      color: '#81d4fa', highlight: '#b3e5fc', shadow: '#4fc3f7' },
    { id: 'peach',    name: 'Peach',         color: '#ffab91', highlight: '#ffccbc', shadow: '#e57373' },
    { id: 'lemon',    name: 'Lemon Yellow',  color: '#fff176', highlight: '#fff9c4', shadow: '#fdd835' },
  ];

  // Build pillow selection grid
  const pillowGrid = document.getElementById('pillow-grid');
  pillowData.forEach(p => {
    const div = document.createElement('div');
    div.className = 'pillow-option';
    div.dataset.pillow = p.id;
    div.dataset.color = p.color;
    div.dataset.highlight = p.highlight;
    div.dataset.shadow = p.shadow;
    div.innerHTML = `
      <div class="pillow-svg-wrap">${makePillowSVG(p.color, p.highlight, p.shadow)}</div>
      <span class="pillow-name">${p.name}</span>
      <div class="check">&#x2713;</div>
    `;
    pillowGrid.appendChild(div);
  });

  // Cute game-quality girl SVG - big eyes, expressive, styled hair, patterned PJs, pillow raised to clash
  function makeGirlSVG(hairColor, hairHighlight, skinTone, skinShadow, shirtColor, shirtPattern, pillowColor, pillowHighlight, pillowShadow, facingRight = false, eyeColor = '#6B8E5A', hairstyle = 'long') {
    const w = 260, h = 340;
    const s = facingRight ? 'r' : 'l';
    const flip = facingRight ? `transform="scale(-1,1) translate(-${w},0)"` : '';

    // Polka dot pattern for PJs
    const dotColor = shirtPattern;

    return `<svg width="${w}" height="${h}" viewBox="0 0 ${w} ${h}">
      <defs>
        <radialGradient id="sk_${s}"><stop offset="0%" stop-color="${skinTone}"/><stop offset="100%" stop-color="${skinShadow}"/></radialGradient>
        <linearGradient id="hr_${s}" x1="0%" y1="0%" x2="80%" y2="100%"><stop offset="0%" stop-color="${hairHighlight}"/><stop offset="100%" stop-color="${hairColor}"/></linearGradient>
        <linearGradient id="pw_${s}" x1="20%" y1="0%" x2="80%" y2="100%"><stop offset="0%" stop-color="${pillowHighlight}"/><stop offset="100%" stop-color="${pillowColor}"/></linearGradient>
        <linearGradient id="pws_${s}" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="${pillowColor}"/><stop offset="100%" stop-color="${pillowShadow}"/></linearGradient>
        <pattern id="dots_${s}" patternUnits="userSpaceOnUse" width="14" height="14">
          <rect width="14" height="14" fill="${shirtColor}"/>
          <circle cx="7" cy="7" r="2.5" fill="${dotColor}" opacity="0.35"/>
        </pattern>
        <filter id="glow_${s}"><feGaussianBlur stdDeviation="2" result="g"/><feMerge><feMergeNode in="g"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
      </defs>
      <g ${flip}>

      <!-- ====== HAIR BACK (volume behind head) ====== -->
      <ellipse cx="105" cy="80" rx="55" ry="58" fill="url(#hr_${s})"/>
      ${hairstyle === 'long' ? `
      <!-- Long hair flowing down back -->
      <path d="M50 78 Q38 130 42 190 Q44 210 52 220" fill="url(#hr_${s})"/>
      <path d="M160 78 Q172 130 168 190 Q166 210 158 220" fill="url(#hr_${s})"/>
      <path d="M50 100 Q44 140 46 185" stroke="${hairHighlight}" stroke-width="3" fill="none" opacity="0.25" stroke-linecap="round"/>
      <path d="M58 95 Q52 140 54 180" stroke="${hairHighlight}" stroke-width="2" fill="none" opacity="0.18" stroke-linecap="round"/>
      <path d="M155 100 Q162 140 160 185" stroke="${hairHighlight}" stroke-width="3" fill="none" opacity="0.25" stroke-linecap="round"/>
      ` : `
      <!-- Bob/short hair - curls at shoulder -->
      <path d="M48 78 Q40 110 48 145 Q55 155 62 148" fill="url(#hr_${s})"/>
      <path d="M162 78 Q170 110 162 145 Q155 155 148 148" fill="url(#hr_${s})"/>
      <!-- Bob hair volume puff -->
      <ellipse cx="48" cy="105" rx="12" ry="25" fill="url(#hr_${s})" opacity="0.7"/>
      <ellipse cx="162" cy="105" rx="12" ry="25" fill="url(#hr_${s})" opacity="0.7"/>
      <!-- Bob curl tips -->
      <path d="M48 140 Q42 148 50 150" stroke="${hairHighlight}" stroke-width="3" fill="none" opacity="0.2" stroke-linecap="round"/>
      <path d="M162 140 Q168 148 160 150" stroke="${hairHighlight}" stroke-width="3" fill="none" opacity="0.2" stroke-linecap="round"/>
      <path d="M52 100 Q46 118 50 135" stroke="${hairHighlight}" stroke-width="2" fill="none" opacity="0.2" stroke-linecap="round"/>
      <path d="M158 100 Q164 118 160 135" stroke="${hairHighlight}" stroke-width="2" fill="none" opacity="0.2" stroke-linecap="round"/>
      `}

      <!-- ====== BODY ====== -->
      <!-- Torso PJ top -->
      <path d="M68 160 Q62 165 60 178 L56 255 Q82 268 130 268 Q156 268 158 255 L154 178 Q152 165 146 160 Z" fill="url(#dots_${s})"/>
      <!-- Body shadow bottom -->
      <path d="M62 230 Q105 245 152 230 L152 255 Q130 268 82 268 L62 255 Z" fill="rgba(0,0,0,0.06)"/>
      <!-- V-neck opening -->
      <path d="M82 160 L105 178 L128 160" fill="url(#sk_${s})"/>
      <path d="M82 160 L105 178 L128 160" fill="none" stroke="${dotColor}" stroke-width="1" opacity="0.3"/>

      <!-- ====== LEGS ====== -->
      <!-- Left leg -->
      <path d="M76 258 Q72 280 70 305 Q68 318 76 320 L90 320 Q94 318 92 305 L88 258" fill="url(#dots_${s})"/>
      <!-- Right leg - dynamic action pose, leg back -->
      <path d="M122 258 Q126 278 132 300 Q135 315 128 320 L116 322 Q110 320 114 302 L118 258" fill="url(#dots_${s})"/>
      <!-- Feet -->
      <ellipse cx="83" cy="323" rx="16" ry="7" fill="#f48fb1"/>
      <ellipse cx="83" cy="320" rx="12" ry="5.5" fill="#f8b0c8"/>
      <ellipse cx="122" cy="325" rx="15" ry="6.5" fill="#ce93d8"/>
      <ellipse cx="122" cy="322" rx="11" ry="5" fill="#daaee8"/>

      <!-- ====== LEFT ARM (bottom grip on pillow, crossing body) ====== -->
      <path d="M65 172 Q88 152 118 135 Q148 118 170 100" stroke="url(#sk_${s})" stroke-width="14" fill="none" stroke-linecap="round"/>
      <!-- Left sleeve -->
      <path d="M66 172 Q85 156 108 142" stroke="url(#dots_${s})" stroke-width="18" fill="none" stroke-linecap="round"/>
      <!-- Left hand gripping bottom of pillow -->
      <circle cx="170" cy="100" r="9" fill="${skinTone}"/>
      <ellipse cx="176" cy="94" rx="3.5" ry="5" fill="${skinTone}" transform="rotate(15 176 94)"/>
      <ellipse cx="168" cy="93" rx="3.5" ry="5" fill="${skinTone}" transform="rotate(-8 168 93)"/>
      <ellipse cx="162" cy="97" rx="3" ry="4.5" fill="${skinTone}" transform="rotate(-18 162 97)"/>

      <!-- ====== RIGHT ARM (top grip, extended toward opponent) ====== -->
      <path d="M150 172 Q178 140 208 105 Q228 78 238 58" stroke="url(#sk_${s})" stroke-width="14" fill="none" stroke-linecap="round"/>
      <!-- Right sleeve -->
      <path d="M150 170 Q172 148 195 122" stroke="url(#dots_${s})" stroke-width="18" fill="none" stroke-linecap="round"/>
      <!-- Right hand gripping top of pillow -->
      <circle cx="238" cy="58" r="9" fill="${skinTone}"/>
      <ellipse cx="244" cy="52" rx="3.5" ry="5" fill="${skinTone}" transform="rotate(18 244 52)"/>
      <ellipse cx="236" cy="50" rx="3.5" ry="5" fill="${skinTone}" transform="rotate(3 236 50)"/>
      <ellipse cx="230" cy="54" rx="3" ry="4.5" fill="${skinTone}" transform="rotate(-12 230 54)"/>

      <!-- ====== PILLOW (big, held naturally at chest height with both hands) ====== -->
      <g class="avatar-pillow">
        <!-- Pillow body - bigger, softer angle -->
        <rect x="152" y="32" width="108" height="76" rx="28" ry="28" fill="url(#pw_${s})" transform="rotate(-12 206 70)"/>
        <!-- Pillow border -->
        <rect x="152" y="32" width="108" height="76" rx="28" ry="28" fill="none" stroke="${pillowShadow}" stroke-width="1.5" opacity="0.3" transform="rotate(-12 206 70)"/>
        <!-- Pillow puff highlights -->
        <ellipse cx="180" cy="50" rx="16" ry="10" fill="${pillowHighlight}" opacity="0.3" transform="rotate(-12 180 50)"/>
        <ellipse cx="240" cy="52" rx="14" ry="9" fill="${pillowHighlight}" opacity="0.2" transform="rotate(-12 240 52)"/>
        <ellipse cx="206" cy="95" rx="18" ry="8" fill="${pillowShadow}" opacity="0.1" transform="rotate(-12 206 95)"/>
        <!-- Pillow corner tufts -->
        <circle cx="156" cy="48" r="10" fill="${pillowHighlight}" opacity="0.15" transform="rotate(-12 156 48)"/>
        <circle cx="258" cy="48" r="10" fill="${pillowHighlight}" opacity="0.12" transform="rotate(-12 258 48)"/>
        <circle cx="156" cy="95" r="9" fill="${pillowShadow}" opacity="0.08" transform="rotate(-12 156 95)"/>
        <circle cx="258" cy="95" r="9" fill="${pillowShadow}" opacity="0.08" transform="rotate(-12 258 95)"/>
        <!-- Pillow center stitch -->
        <line x1="206" y1="34" x2="206" y2="106" stroke="${pillowShadow}" stroke-width="1" opacity="0.12" stroke-dasharray="5,3" transform="rotate(-12 206 70)"/>
        <!-- Polka dots on pillow -->
        <circle cx="182" cy="62" r="3.5" fill="${pillowShadow}" opacity="0.1" transform="rotate(-12 182 62)"/>
        <circle cx="228" cy="58" r="3.5" fill="${pillowShadow}" opacity="0.1" transform="rotate(-12 228 58)"/>
        <circle cx="202" cy="82" r="3" fill="${pillowShadow}" opacity="0.08" transform="rotate(-12 202 82)"/>
        <circle cx="172" cy="78" r="2.5" fill="${pillowShadow}" opacity="0.06" transform="rotate(-12 172 78)"/>
        <!-- Feathers peeking out edges -->
        <circle cx="260" cy="58" r="3" fill="white" opacity="0.5" transform="rotate(-12 260 58)"/>
        <circle cx="256" cy="75" r="2.5" fill="white" opacity="0.35" transform="rotate(-12 256 75)"/>
        <circle cx="155" cy="82" r="2.5" fill="white" opacity="0.3" transform="rotate(-12 155 82)"/>
        <!-- Pillow fabric wrinkles -->
        <path d="M178 58 Q200 52 220 58" stroke="${pillowShadow}" stroke-width="0.8" fill="none" opacity="0.1" transform="rotate(-12 199 55)"/>
        <path d="M182 76 Q204 72 224 76" stroke="${pillowShadow}" stroke-width="0.8" fill="none" opacity="0.08" transform="rotate(-12 203 74)"/>
      </g>

      <!-- ====== NECK ====== -->
      <rect x="92" y="140" width="26" height="24" rx="10" fill="url(#sk_${s})"/>
      <ellipse cx="105" cy="160" rx="16" ry="5" fill="${skinShadow}" opacity="0.12"/>

      <!-- ====== HEAD (large, cute proportions) ====== -->
      <ellipse cx="105" cy="90" rx="48" ry="52" fill="url(#sk_${s})"/>

      <!-- ====== HAIR FRONT ====== -->
      ${hairstyle === 'long' ? `
      <!-- Thick bangs - long flowing -->
      <path d="M57 72 Q65 32 105 26 Q145 32 153 72" fill="url(#hr_${s})"/>
      <path d="M70 60 Q80 38 95 42" stroke="${hairHighlight}" stroke-width="2.5" fill="none" opacity="0.2" stroke-linecap="round"/>
      <path d="M88 50 Q100 35 115 42" stroke="${hairHighlight}" stroke-width="2" fill="none" opacity="0.18" stroke-linecap="round"/>
      <path d="M110 48 Q125 36 140 58" stroke="${hairHighlight}" stroke-width="2" fill="none" opacity="0.15" stroke-linecap="round"/>
      <!-- Side hair framing face -->
      <path d="M57 72 Q55 88 57 100 Q58 108 62 112" fill="url(#hr_${s})"/>
      <path d="M153 72 Q155 88 153 100 Q152 108 148 112" fill="url(#hr_${s})"/>
      <!-- Star clip -->
      <g transform="translate(145,55) scale(0.45)">
        <polygon points="0,-14 4,-4 14,-4 6,2 9,12 0,6 -9,12 -6,2 -14,-4 -4,-4" fill="#ffd700" opacity="0.8"/>
      </g>
      ` : `
      <!-- Shorter side-swept bangs - bob style -->
      <path d="M57 72 Q65 35 105 28 Q145 35 153 72" fill="url(#hr_${s})"/>
      <!-- Side sweep texture -->
      <path d="M65 62 Q78 40 100 45" stroke="${hairHighlight}" stroke-width="2.5" fill="none" opacity="0.2" stroke-linecap="round"/>
      <path d="M100 42 Q120 36 145 60" stroke="${hairHighlight}" stroke-width="2" fill="none" opacity="0.15" stroke-linecap="round"/>
      <!-- Shorter side framing -->
      <path d="M57 72 Q54 90 58 106" fill="url(#hr_${s})"/>
      <path d="M153 72 Q156 90 152 106" fill="url(#hr_${s})"/>
      <!-- Heart hair clip instead of star -->
      <g transform="translate(145,55) scale(0.38)">
        <path d="M0,-8 C-6,-18 -20,-6 0,8 C20,-6 6,-18 0,-8Z" fill="#ff6b9d" opacity="0.85"/>
        <path d="M-2,-6 C-5,-12 -12,-6 -2,2" fill="#ff8eb5" opacity="0.5"/>
      </g>
      `}

      <!-- ====== FACE DETAILS ====== -->
      <!-- Eyebrows (expressive, raised) -->
      <path d="M76 66 Q85 58 96 64" stroke="${hairColor}" stroke-width="2.8" fill="none" stroke-linecap="round" opacity="0.55"/>
      <path d="M114 64 Q125 58 134 66" stroke="${hairColor}" stroke-width="2.8" fill="none" stroke-linecap="round" opacity="0.55"/>

      <!-- ====== BIG EXPRESSIVE EYES ====== -->
      <!-- Eye whites -->
      <ellipse cx="88" cy="82" rx="13" ry="14" fill="white"/>
      <ellipse cx="122" cy="82" rx="13" ry="14" fill="white"/>
      <!-- Iris (large, colored) -->
      <circle cx="90" cy="84" r="10" fill="${eyeColor}"/>
      <circle cx="124" cy="84" r="10" fill="${eyeColor}"/>
      <!-- Iris gradient ring -->
      <circle cx="90" cy="84" r="10" fill="none" stroke="#000" stroke-width="2" opacity="0.15"/>
      <circle cx="124" cy="84" r="10" fill="none" stroke="#000" stroke-width="2" opacity="0.15"/>
      <!-- Inner iris detail -->
      <circle cx="90" cy="84" r="7" fill="${eyeColor}"/>
      <circle cx="90" cy="84" r="7" fill="#000" opacity="0.2"/>
      <circle cx="124" cy="84" r="7" fill="${eyeColor}"/>
      <circle cx="124" cy="84" r="7" fill="#000" opacity="0.2"/>
      <!-- Pupil -->
      <circle cx="90" cy="84" r="4.5" fill="#1a1a1a"/>
      <circle cx="124" cy="84" r="4.5" fill="#1a1a1a"/>
      <!-- Eye sparkle highlights (multiple for that anime game look) -->
      <circle cx="85" cy="78" r="4" fill="white" opacity="0.95"/>
      <circle cx="119" cy="78" r="4" fill="white" opacity="0.95"/>
      <circle cx="94" cy="87" r="2.5" fill="white" opacity="0.6"/>
      <circle cx="128" cy="87" r="2.5" fill="white" opacity="0.6"/>
      <circle cx="87" cy="82" r="1.2" fill="white" opacity="0.4"/>
      <circle cx="121" cy="82" r="1.2" fill="white" opacity="0.4"/>
      <!-- Thick upper eyelid -->
      <path d="M75 76 Q82 68 96 72 Q100 74 101 78" stroke="#2E1A0E" stroke-width="3" fill="none" stroke-linecap="round"/>
      <path d="M109 78 Q110 74 114 72 Q128 68 135 76" stroke="#2E1A0E" stroke-width="3" fill="none" stroke-linecap="round"/>
      <!-- Long eyelashes -->
      <path d="M75 76 Q71 70 68 67" stroke="#2E1A0E" stroke-width="2" fill="none" stroke-linecap="round"/>
      <path d="M78 73 Q75 68 73 65" stroke="#2E1A0E" stroke-width="1.5" fill="none" stroke-linecap="round"/>
      <path d="M101 77 Q104 72 107 70" stroke="#2E1A0E" stroke-width="1.5" fill="none" stroke-linecap="round"/>
      <path d="M109 77 Q106 72 103 70" stroke="#2E1A0E" stroke-width="1.5" fill="none" stroke-linecap="round"/>
      <path d="M135 76 Q139 70 142 67" stroke="#2E1A0E" stroke-width="2" fill="none" stroke-linecap="round"/>
      <path d="M132 73 Q135 68 137 65" stroke="#2E1A0E" stroke-width="1.5" fill="none" stroke-linecap="round"/>
      <!-- Lower eyelid -->
      <path d="M78 92 Q88 96 98 92" stroke="#8B6F5E" stroke-width="1" fill="none" opacity="0.35"/>
      <path d="M112 92 Q122 96 132 92" stroke="#8B6F5E" stroke-width="1" fill="none" opacity="0.35"/>

      <!-- Nose (small, cute) -->
      <path d="M102 94 Q105 100 108 94" stroke="${skinShadow}" stroke-width="1.5" fill="none" opacity="0.3" stroke-linecap="round"/>

      <!-- Mouth (open, excited smile) -->
      <path d="M90 108 Q100 104 105 106 Q110 104 120 108" stroke="#D46070" stroke-width="1.5" fill="none" stroke-linecap="round"/>
      <path d="M92 109 Q105 120 118 109" fill="#D46070"/>
      <!-- Teeth showing -->
      <path d="M96 109 Q105 112 114 109" fill="white"/>
      <!-- Lower lip -->
      <path d="M92 109 Q105 120 118 109" fill="none" stroke="#C05060" stroke-width="1" opacity="0.6"/>
      <!-- Tongue hint -->
      <ellipse cx="105" cy="116" rx="5" ry="3" fill="#E07080" opacity="0.5"/>
      <!-- Lip shine -->
      <ellipse cx="102" cy="107" rx="4" ry="1.5" fill="white" opacity="0.15"/>

      <!-- Big rosy blush circles -->
      <circle cx="72" cy="100" r="10" fill="#FF8A80" opacity="0.25"/>
      <circle cx="138" cy="100" r="10" fill="#FF8A80" opacity="0.25"/>

      <!-- Ears -->
      <ellipse cx="56" cy="88" rx="6" ry="10" fill="url(#sk_${s})"/>
      <ellipse cx="154" cy="88" rx="6" ry="10" fill="url(#sk_${s})"/>

      </g>
    </svg>`;
  }

  // ===================== STARS BACKGROUND =====================
  const starsCanvas = document.getElementById('stars');
  const starsCtx = starsCanvas.getContext('2d');
  let starsList = [];

  function initStars() {
    starsCanvas.width = window.innerWidth;
    starsCanvas.height = window.innerHeight;
    starsList = [];
    for (let i = 0; i < 150; i++) {
      starsList.push({
        x: Math.random() * starsCanvas.width,
        y: Math.random() * starsCanvas.height,
        r: Math.random() * 1.8 + 0.3,
        alpha: Math.random(),
        dAlpha: (Math.random() - 0.5) * 0.015
      });
    }
  }

  function drawStars() {
    starsCtx.clearRect(0, 0, starsCanvas.width, starsCanvas.height);
    starsList.forEach(s => {
      s.alpha += s.dAlpha;
      if (s.alpha <= 0.1 || s.alpha >= 1) s.dAlpha *= -1;
      starsCtx.beginPath();
      starsCtx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
      starsCtx.fillStyle = `rgba(255,255,255,${s.alpha})`;
      starsCtx.fill();
    });
    requestAnimationFrame(drawStars);
  }

  initStars();
  drawStars();
  window.addEventListener('resize', initStars);

  // ===================== DECORATIONS VISIBILITY =====================
  const allDecos = document.querySelectorAll('.sleepover-deco');

  function showDecos() {
    allDecos.forEach((d, i) => {
      setTimeout(() => d.classList.add('visible'), i * 200);
    });
  }

  function hideDecos() {
    allDecos.forEach(d => d.classList.remove('visible'));
  }

  setTimeout(showDecos, 600);

  // ===================== GAME STATE =====================
  let playerName = '';
  let selectedPillow = null;
  let selectedPillowData = null;
  let smashCount = 0;
  const smashGoal = 10;

  // ===================== SCREEN NAVIGATION =====================
  function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');

    if (id === 'screen-name') showDecos();
    else hideDecos();
  }

  // ===================== SCREEN 1: NAME =====================
  const nameInput = document.getElementById('player-name');
  const btnStart = document.getElementById('btn-start');

  nameInput.addEventListener('input', () => {
    btnStart.disabled = nameInput.value.trim().length === 0;
  });

  nameInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && nameInput.value.trim()) goToPillow();
  });

  btnStart.addEventListener('click', goToPillow);

  function goToPillow() {
    playerName = nameInput.value.trim();
    document.getElementById('greeting-name').textContent = playerName;
    document.getElementById('fighter-player-name').textContent = playerName;
    showScreen('screen-pillow');
  }

  // ===================== SCREEN 2: PILLOW SELECT =====================
  const pillowOptions = document.querySelectorAll('.pillow-option');
  const btnFight = document.getElementById('btn-fight');

  pillowOptions.forEach(opt => {
    opt.addEventListener('click', () => {
      pillowOptions.forEach(o => o.classList.remove('selected'));
      opt.classList.add('selected');
      selectedPillow = opt.dataset.pillow;
      selectedPillowData = {
        color: opt.dataset.color,
        highlight: opt.dataset.highlight,
        shadow: opt.dataset.shadow
      };
      btnFight.disabled = false;
    });
  });

  btnFight.addEventListener('click', goToFight);

  function goToFight() {
    const p = selectedPillowData;

    const oppOptions = pillowData.filter(pd => pd.id !== selectedPillow);
    const opp = oppOptions[Math.floor(Math.random() * oppOptions.length)];

    // Player: auburn/red hair girl, green eyes, long hair, pink PJs
    document.getElementById('player-avatar').innerHTML =
      makeGirlSVG('#C05020', '#E87840', '#FDBCB4', '#E8A090', '#E868A0', '#C85888',
                  p.color, p.highlight, p.shadow, false, '#6B8E5A', 'long');

    // Opponent: dark hair, brown skin, brown eyes, bob hairstyle, purple PJs
    document.getElementById('opponent-avatar').innerHTML =
      makeGirlSVG('#1A0E08', '#3A2418', '#C68642', '#A0693A', '#9878C8', '#7858A8',
                  opp.color, opp.highlight, opp.shadow, true, '#5C3317', 'bob');

    smashCount = 0;
    comboCount = 0;
    lastSmashTime = 0;
    document.getElementById('smash-count').textContent = '0';
    document.getElementById('fight-progress').style.width = '0%';
    document.getElementById('combo-display').classList.remove('active');
    document.getElementById('winner-banner').classList.remove('show');
    document.getElementById('fight-instruction').style.display = '';

    showScreen('screen-fight');
  }

  // ===================== SCREEN 3: IMMERSIVE PILLOW FIGHT =====================
  const fightScene = document.getElementById('fight-scene');
  const fighterLeft = document.getElementById('fighter-left');
  const fighterRight = document.getElementById('fighter-right');
  const impactBurst = document.getElementById('impact-burst');
  const flashOverlay = document.getElementById('flash-overlay');
  const comboDisplay = document.getElementById('combo-display');

  let comboCount = 0;
  let lastSmashTime = 0;
  let fightLocked = false;

  function triggerSwing() {
    if (smashCount >= smashGoal || fightLocked) return;
    fightLocked = true;

    smashCount++;
    document.getElementById('smash-count').textContent = smashCount;
    const progress = (smashCount / smashGoal) * 100;
    document.getElementById('fight-progress').style.width = progress + '%';

    // Combo system
    const now = Date.now();
    if (now - lastSmashTime < 800) {
      comboCount++;
    } else {
      comboCount = 1;
    }
    lastSmashTime = now;

    if (comboCount >= 2) {
      comboDisplay.textContent = `COMBO x${comboCount}`;
      comboDisplay.classList.add('active');
      comboDisplay.style.transform = `scale(${1 + comboCount * 0.08})`;
    }

    // Both girls swing toward each other
    fighterLeft.classList.remove('swing-left');
    fighterRight.classList.remove('swing-right');
    void fighterLeft.offsetWidth; // force reflow
    fighterLeft.classList.add('swing-left');
    fighterRight.classList.add('swing-right');

    setTimeout(() => {
      fighterLeft.classList.remove('swing-left');
      fighterRight.classList.remove('swing-right');
    }, 260);

    // Impact burst at center
    const isBig = comboCount >= 4;
    impactBurst.className = 'impact-burst';
    void impactBurst.offsetWidth;
    impactBurst.classList.add('fire');
    if (isBig) impactBurst.classList.add('big');
    setTimeout(() => { impactBurst.className = 'impact-burst'; }, 500);

    // Flash overlay on strong hits
    if (comboCount >= 3) {
      flashOverlay.classList.add('flash');
      setTimeout(() => flashOverlay.classList.remove('flash'), 80);
    }

    // Hit effects at impact zone center
    const impactRect = document.getElementById('impact-zone').getBoundingClientRect();
    const cx = impactRect.left + impactRect.width / 2;
    const cy = impactRect.top + impactRect.height / 2;

    const effects = ['\u{1F4A5}', '\u2728', '\u{1FAB6}', '\u2B50', '\u{1F4AB}', 'POW!', 'BAM!', 'WHACK!', 'SMASH!'];
    const numEffects = Math.min(2 + Math.floor(comboCount / 2), 4);
    for (let i = 0; i < numEffects; i++) {
      const hitEl = document.createElement('div');
      hitEl.className = 'hit-effect';
      hitEl.textContent = effects[Math.floor(Math.random() * effects.length)];
      hitEl.style.left = (cx + (Math.random() - 0.5) * 80) + 'px';
      hitEl.style.top = (cy + (Math.random() - 0.5) * 60) + 'px';
      hitEl.style.fontSize = (1.5 + comboCount * 0.15) + 'rem';
      document.body.appendChild(hitEl);
      setTimeout(() => hitEl.remove(), 600);
    }

    // Feathers from impact
    const featherCount = 3 + Math.min(comboCount, 6);
    spawnMiniFeathers(cx, cy, featherCount);

    fightLocked = false;

    if (smashCount >= smashGoal) {
      comboDisplay.classList.remove('active');
      // Show winner banner
      const winnerBanner = document.getElementById('winner-banner');
      winnerBanner.textContent = ` ${playerName} Wins!`;
      winnerBanner.classList.add('show');
      document.getElementById('fight-instruction').style.display = 'none';
      setTimeout(startFeatherExplosion, 800);
    }
  }

  // Click anywhere on fight screen to swing
  document.getElementById('screen-fight').addEventListener('click', (e) => {
    if (e.target.closest('.progress-bar-container')) return;
    triggerSwing();
  });

  document.getElementById('screen-fight').addEventListener('touchstart', (e) => {
    e.preventDefault();
    triggerSwing();
  }, { passive: false });

  // ===================== FEATHER SYSTEM =====================
  const featherCanvas = document.getElementById('feather-canvas');
  const featherCtx = featherCanvas.getContext('2d');
  let feathers = [];
  let featherAnimating = false;

  function resizeFeatherCanvas() {
    featherCanvas.width = window.innerWidth;
    featherCanvas.height = window.innerHeight;
  }
  resizeFeatherCanvas();
  window.addEventListener('resize', resizeFeatherCanvas);

  const featherColors = ['#ffffff', '#ffe4ec', '#e0e7ff', '#fff3cd', '#d4f0ff', '#f0e6ff', '#ffd6e0'];

  class Feather {
    constructor(x, y, isMini = false) {
      this.x = x;
      this.y = y;
      this.vx = (Math.random() - 0.5) * (isMini ? 4 : 12);
      this.vy = (Math.random() - 0.5) * (isMini ? 4 : 10) - (isMini ? 1 : 4);
      this.rotation = Math.random() * Math.PI * 2;
      this.rotationSpeed = (Math.random() - 0.5) * 0.08;
      this.size = isMini ? Math.random() * 6 + 3 : Math.random() * 14 + 6;
      this.color = featherColors[Math.floor(Math.random() * featherColors.length)];
      this.alpha = 1;
      this.gravity = 0.04 + Math.random() * 0.03;
      this.drag = 0.99;
      this.wobble = Math.random() * Math.PI * 2;
      this.wobbleSpeed = 0.02 + Math.random() * 0.03;
      this.settled = false;
      this.groundY = featherCanvas.height - Math.random() * 60 - 10;
    }

    update() {
      if (this.settled) return;
      this.wobble += this.wobbleSpeed;
      this.vx += Math.sin(this.wobble) * 0.15;
      this.vy += this.gravity;
      this.vx *= this.drag;
      this.vy *= this.drag;
      this.x += this.vx;
      this.y += this.vy;
      this.rotation += this.rotationSpeed;

      if (this.y >= this.groundY) {
        this.y = this.groundY;
        this.vy = 0;
        this.vx *= 0.9;
        this.rotationSpeed *= 0.95;
        if (Math.abs(this.vx) < 0.1 && Math.abs(this.rotationSpeed) < 0.001) {
          this.settled = true;
        }
      }

      if (this.x < 0 || this.x > featherCanvas.width) this.vx *= -0.5;
    }

    draw(ctx) {
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate(this.rotation);
      ctx.globalAlpha = this.alpha;

      ctx.beginPath();
      ctx.ellipse(0, 0, this.size * 0.35, this.size, 0, 0, Math.PI * 2);
      ctx.fillStyle = this.color;
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(0, -this.size);
      ctx.lineTo(0, this.size);
      ctx.strokeStyle = 'rgba(255,255,255,0.3)';
      ctx.lineWidth = 0.5;
      ctx.stroke();

      ctx.restore();
    }
  }

  function spawnMiniFeathers(x, y, count) {
    for (let i = 0; i < count; i++) {
      feathers.push(new Feather(x, y, true));
    }
    if (!featherAnimating) {
      featherAnimating = true;
      animateFeathers();
    }
  }

  function startFeatherExplosion() {
    showScreen('screen-fight');
    feathers = [];

    const cx = window.innerWidth / 2;
    const cy = window.innerHeight / 2;

    for (let wave = 0; wave < 3; wave++) {
      setTimeout(() => {
        for (let i = 0; i < 60; i++) {
          feathers.push(new Feather(
            cx + (Math.random() - 0.5) * 200,
            cy + (Math.random() - 0.5) * 150
          ));
        }
      }, wave * 300);
    }

    featherAnimating = true;
    animateFeathers();

    setTimeout(() => {
      fadeOutFeathers();
    }, 2500);
  }

  function animateFeathers() {
    if (!featherAnimating) return;

    featherCtx.clearRect(0, 0, featherCanvas.width, featherCanvas.height);
    feathers.forEach(f => {
      f.update();
      f.draw(featherCtx);
    });

    requestAnimationFrame(animateFeathers);
  }

  function fadeOutFeathers() {
    let fadeStep = 0;
    const fadeInterval = setInterval(() => {
      fadeStep++;
      feathers.forEach(f => {
        f.alpha = Math.max(0, 1 - fadeStep * 0.04);
      });
      if (fadeStep >= 25) {
        clearInterval(fadeInterval);
        featherAnimating = false;
        featherCtx.clearRect(0, 0, featherCanvas.width, featherCanvas.height);
        feathers = [];
        document.getElementById('invite-name').textContent = playerName;
        showScreen('screen-invite');
      }
    }, 50);
  }

  // ===================== RSVP =====================
  const rsvpWrapper = document.getElementById('rsvp-wrapper');
  const rsvpCheck = document.getElementById('rsvp-check');
  const rsvpSubmitBtn = document.getElementById('rsvp-submit');
  const rsvpSuccess = document.getElementById('rsvp-success');
  let rsvpChecked = false;

  rsvpWrapper.addEventListener('click', () => {
    rsvpChecked = !rsvpChecked;
    rsvpWrapper.classList.toggle('checked', rsvpChecked);
    rsvpCheck.textContent = rsvpChecked ? '\u2713' : '';
    rsvpSubmitBtn.classList.toggle('show', rsvpChecked);

    if (!rsvpChecked) {
      rsvpSuccess.classList.remove('show');
    }
  });

  rsvpSubmitBtn.addEventListener('click', () => {
    rsvpSubmitBtn.style.display = 'none';
    rsvpSuccess.classList.add('show');
    document.getElementById('rsvp-msg').textContent =
      `${playerName} is coming to the party!`;
    document.getElementById('rsvp-confirm').classList.add('show');

    saveRSVP(playerName);

    for (let i = 0; i < 40; i++) {
      setTimeout(() => {
        feathers.push(new Feather(Math.random() * window.innerWidth, -20));
      }, i * 50);
    }
    featherAnimating = true;
    animateFeathers();

    setTimeout(() => {
      fadeOutFeathers();
    }, 3500);
  });

  // ===================== GUEST LIST SYSTEM =====================
  // Clear old test data (bump version to reset again)
  const RSVP_VERSION = 'v2';
  if (localStorage.getItem('sleepover_rsvp_version') !== RSVP_VERSION) {
    localStorage.removeItem('sleepover_rsvps');
    localStorage.setItem('sleepover_rsvp_version', RSVP_VERSION);
  }

  function getLocalGuests() {
    try {
      return JSON.parse(localStorage.getItem('sleepover_rsvps') || '[]');
    } catch { return []; }
  }

  function saveLocalGuest(name) {
    const guests = getLocalGuests();
    if (!guests.some(g => g.name.toLowerCase() === name.toLowerCase())) {
      guests.push({ name, timestamp: new Date().toISOString() });
      localStorage.setItem('sleepover_rsvps', JSON.stringify(guests));
    }
  }

  function renderGuestList(guests) {
    const listEl = document.getElementById('guest-list');
    const countEl = document.getElementById('guest-count');

    if (!guests || guests.length === 0) {
      listEl.innerHTML = '<div class="guest-list-empty">Be the first to RSVP!</div>';
      countEl.textContent = '0 going';
      return;
    }

    countEl.textContent = `${guests.length} going`;
    listEl.innerHTML = guests.map(g => {
      const initials = g.name.split(' ').map(w => w[0]).join('').toUpperCase().slice(0, 2);
      return `<div class="guest-chip">
        <div class="guest-avatar">${initials}</div>
        ${g.name}
      </div>`;
    }).join('');
  }

  async function fetchGuestList() {
    if (RSVP_SCRIPT_URL) {
      try {
        const res = await fetch(RSVP_SCRIPT_URL);
        const data = await res.json();
        if (data.guests) {
          localStorage.setItem('sleepover_rsvps', JSON.stringify(data.guests));
          renderGuestList(data.guests);
          return;
        }
      } catch (e) {
        console.log('Could not fetch remote guest list, using local:', e);
      }
    }
    renderGuestList(getLocalGuests());
  }

  async function saveRSVP(name) {
    saveLocalGuest(name);

    if (RSVP_SCRIPT_URL) {
      try {
        await fetch(RSVP_SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, timestamp: new Date().toISOString() })
        });
      } catch (e) {
        console.log('Remote RSVP save failed, saved locally:', e);
      }
    }

    setTimeout(fetchGuestList, 500);
  }

  fetchGuestList();
</script>

</body>
</html>
